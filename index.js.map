{"version":3,"file":"index.js","sources":["../src/js/pickabay-api.js","../src/img/icon-no-results.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const IMAGES_PER_PAGE = 40\nexport let currentPage = 1;\n\nexport function fetchImages(searchText, isNextPage = false) {\n  if (isNextPage) {\n    ++currentPage;\n  } else {\n    currentPage = 1;\n  }\n\n  const options = {\n    params: {\n      key: '48678129-2163769dcaa82a491114adb07',\n      q: searchText,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      iMAGES_per_page: IMAGES_PER_PAGE,\n      page: currentPage,\n    },\n  };\n\n  return axios.get('https://pixabay.com/api/', options);\n}\n","export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3c!--%20Magnifying%20Glass%20--%3e%3ccircle%20cx='10'%20cy='10'%20r='7'%20stroke='%23fff'%20stroke-width='2'%20/%3e%3cline%20x1='15'%20y1='15'%20x2='21'%20y2='21'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3c!--%20Cross%20inside%20the%20lens%20--%3e%3cline%20x1='7'%20y1='7'%20x2='13'%20y2='13'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3cline%20x1='13'%20y1='7'%20x2='7'%20y2='13'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3c/svg%3e\"","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport '../css/sl-custom.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '../css/custom-easytoast.css';\nimport iconNoResults from '../img/icon-no-results.svg';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-box');\nconst btnLoadMore = document.getElementById('load-more');\n\nexport function renderImages(images, isNextPage = false) {\n  if (!isNextPage) gallery.innerHTML = '';\n\n  const galleryHtml = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n          <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <figure class=\"thumb-container\">\n                <img\n                  class=\"thumb-image\"\n                  src=\"${webformatURL}\"\n                  data-source=\"${largeImageURL}\"\n                  alt=\"${tags}\"\n                />\n\n                <figcaption class=\"thumb-data\">\n                  <dl class=\"thumb-data-list\">\n                    <div class=\"thumb-data-item\">\n                      <dt class=\"thumb-data-title\">Likes</dt>\n                      <dd class=\"thumb-data-data\">${likes}</dd>\n                    </div>\n                    <div class=\"thumb-data-item\">\n                      <dt class=\"thumb-data-title\">Views</dt>\n                      <dd class=\"thumb-data-data\">${views}</dd>\n                    </div>\n                    <div class=\"thumb-data-item\">\n                      <dt class=\"thumb-data-title\">Comments</dt>\n                      <dd class=\"thumb-data-data\">${comments}</dd>\n                    </div>\n                    <div class=\"thumb-data-item\">\n                      <dt class=\"thumb-data-title\">Downloads</dt>\n                      <dd class=\"thumb-data-data\">${downloads}</dd>\n                    </div>\n                  </dl>\n                </figcaption>\n              </figure>\n            </a>\n          </li>\n        `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', galleryHtml);\n  lightbox.refresh();\n\n  if (isNextPage && images.length) scrollGallery();\n}\n\nfunction scrollGallery() {\n  const card = document.querySelector('.gallery-item');\n  const cardHeight = card.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function showLoadingView(isNextPage = false) {\n  if (!isNextPage) gallery.classList.add('hidden');\n\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoadingView() {\n  gallery.classList.remove('hidden');\n  loader.classList.add('hidden');\n}\n\nexport function showMessageNoResults() {\n  iziToast.show({\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    messageColor: 'white',\n    iconUrl: iconNoResults,\n    maxWidth: '432px',\n    backgroundColor: '#EF4040',\n  });\n}\n\nexport function showMessageLastPage() {\n  iziToast.show({\n    position: 'topRight',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    messageColor: 'white',\n    iconUrl: iconNoResults,\n    maxWidth: '432px',\n    backgroundColor: '#FF6347',\n  });\n}\n\nexport function showButtonLoadMore() {\n  btnLoadMore.classList.remove('hidden');\n}\n\nexport function hideButtonLoadMore() {\n  btnLoadMore.classList.add('hidden');\n}\n","import { currentPage, fetchImages, IMAGES_PER_PAGE } from './js/pickabay-api';\nimport {\n  hideButtonLoadMore,\n  hideLoadingView,\n  renderImages,\n  showButtonLoadMore,\n  showLoadingView,\n  showMessageLastPage,\n  showMessageNoResults,\n} from './js/render-functions';\n\nconst form = document.querySelector('form');\nconst input = document.querySelector('#search-text');\nconst btnLoadMore = document.getElementById('load-more');\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  handleSearch();\n});\n\nbtnLoadMore.addEventListener('click', () => handleSearch(true));\n\nasync function handleSearch(isNextPage = false) {\n  hideButtonLoadMore();\n  const searchText = input.value.trim();\n\n  if (!searchText) return;\n\n  showLoadingView(isNextPage);\n\n  try {\n    const data = await fetchImages(searchText, isNextPage);\n\n    handleSearchResults(data.data, isNextPage);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction handleSearchResults(\n  { hits: images, totalHits: imagesCount },\n  isNextPage\n) {\n  const pagesCount = Math.ceil(imagesCount / IMAGES_PER_PAGE);\n  const isLastPage = currentPage === pagesCount;\n  const hasResults = !!images.length;\n\n  if (!hasResults) showMessageNoResults();\n\n  if (isLastPage) showMessageLastPage();\n\n  if (hasResults && !isLastPage) showButtonLoadMore();\n\n  hideLoadingView();\n  renderImages(images, isNextPage);\n}\n"],"names":["IMAGES_PER_PAGE","currentPage","fetchImages","searchText","isNextPage","options","axios","iconNoResults","gallery","loader","btnLoadMore","renderImages","images","galleryHtml","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","scrollGallery","cardHeight","SimpleLightbox","showLoadingView","hideLoadingView","showMessageNoResults","iziToast","showMessageLastPage","showButtonLoadMore","hideButtonLoadMore","form","input","e","handleSearch","data","handleSearchResults","err","imagesCount","pagesCount","isLastPage","hasResults"],"mappings":"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"}