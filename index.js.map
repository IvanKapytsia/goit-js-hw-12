{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nconst KEY = '45785559-b0577f06fb94f4ced9a4d3280';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getSearch(searchText, currentPage, perPage) {\n    try {\n\n        searchText = searchText.replace(/\\s+/g, '+');\n\n        const response = await axios.get(`${BASE_URL}`, {\n            params: {\n                key: KEY,\n                q: searchText,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: currentPage,\n                per_page: perPage,\n            }\n        })\n        return response.data;\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry! The site is currently unavailable. Please try later!',\n        });\n\n        throw error;\n    }\n}","export function createMarkup(array) {\n    return array.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n      </a>\n      <div class=\"thumb-block\">\n        <div class=\"block\">\n          <h2 class=\"title\">Likes</h2>\n          <p class=\"amount\">${likes}</p>\n        </div>\n        <div class=\"block\">\n          <h2 class=\"title\">Views</h2>\n          <p class=\"amount\">${views}</p>\n        </div>\n        <div class=\"block\">\n          <h2 class=\"title\">Comments</h2>\n          <p class=\"amount\">${comments}</p>\n        </div>\n        <div class=\"block\">\n          <h2 class=\"title\">Downloads</h2>\n          <p class=\"amount\">${downloads}</p>\n        </div>\n      </div>\n    </li>`).join('');\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getSearch } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\n\nconst form = document.querySelector('.js-form');\nconst gallery = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loadMoreBtnText = document.querySelector('.load-more-btn_text');\nconst loadBtnSpinner = document.querySelector('.loader-btn')\n\nlet saveQuery = '';\nlet refreshPage;\nconst perPage = 40;\nlet currentPage;\nlet totalHits;\n\nloader.style.display = 'none';\n\n// ==== Listener and function search images form;\n\nform.addEventListener('submit', onSearch);\n\nasync function onSearch(evt) {\n    evt.preventDefault()\n    gallery.innerHTML = '';\n\n    loader.style.display = 'block';\n\n    saveQuery = evt.target.elements.query.value.trim();\n    currentPage = 1;\n\n    if (saveQuery === '') {\n        return iziToast.warning({\n            title: 'Hello',\n            message: 'Please enter search text!',\n        }),\n            loader.style.display = 'none',\n            hideLoadMoreBtn(),\n            form.reset()\n    }\n\n\n    try {\n        const resp = await getSearch(saveQuery, currentPage, perPage)\n\n        gallery.insertAdjacentHTML(\"beforeend\", createMarkup(resp.hits));\n        totalHits = resp.totalHits;\n\n        if (!resp.hits.length) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            }),\n                loader.style.display = 'none';\n            hideLoadMoreBtn();\n            form.reset();\n            return;\n        }\n\n        loader.style.display = 'none';\n\n        refreshPage = new SimpleLightbox('.gallery a', {\n            captions: true,\n            captionsData: 'alt',\n            captionDelay: 250,\n        });\n        refreshPage.refresh();\n\n        checkBtnStatus();\n    } catch (err) {\n\n        loader.style.display = 'none';\n\n    };\n    form.reset();\n}\n\n// ==== Listener and function Button Load More;\n\nloadMoreBtn.addEventListener('click', loadBtnSearch);\n\nasync function loadBtnSearch() {\n    currentPage += 1;\n    checkBtnStatus();\n    showBtnSpinner();\n\n    const resp = await getSearch(saveQuery, currentPage, perPage)\n\n    gallery.insertAdjacentHTML(\"beforeend\", createMarkup(resp.hits));\n    hideBtnSpinner();\n    scrollNextPage();\n}\n\n// ==== functions show and hide Button Load More;\n\nfunction showLoadMoreBtn() {\n    loadMoreBtn.classList.remove('hidden');\n}\n\nfunction hideLoadMoreBtn() {\n    loadMoreBtn.classList.add('hidden');\n}\n\nfunction checkBtnStatus() {\n    const maxPage = Math.ceil(totalHits / perPage);\n\n    if (currentPage >= maxPage) {\n        hideLoadMoreBtn();\n        iziToast.info({\n            title: 'Hello',\n            message: 'You have viewed all the images.',\n            position: 'topRight',\n        });\n    } else {\n        showLoadMoreBtn();\n    }\n}\n\n// ==== functions show and hide button Load More Spinner;\n\nfunction showBtnSpinner() {\n    loadBtnSpinner.classList.remove('hidden');\n    loadMoreBtnText.classList.add('hidden');\n}\n\nfunction hideBtnSpinner() {\n    loadBtnSpinner.classList.add('hidden');\n    loadMoreBtnText.classList.remove('hidden');\n}\n\n// ==== function Button scroll top;\n\nfunction scrollingTopPage() {\n    document.addEventListener('DOMContentLoaded', function () {\n        const upButton = document.querySelector('.up-btn');\n\n        upButton.addEventListener('click', function () {\n            window.scrollTo({\n                top: 0,\n                behavior: 'smooth'\n            });\n\n            document.body.classList.add('scrolling');\n        });\n\n        window.addEventListener('scroll', function () {\n            if (window.scrollY > 200) {\n                upButton.classList.add('show');\n            } else {\n                upButton.classList.remove('show');\n            }\n\n            if (document.body.classList.contains('scrolling') && window.scrollY === 0) {\n                document.body.classList.remove('scrolling');\n            }\n        });\n    });\n}\n\nscrollingTopPage();\n\n// ==== function smooth scroll next page;\n\nfunction scrollNextPage() {\n    const infoCard = gallery.firstElementChild.getBoundingClientRect();\n    const heightCard = infoCard.height * 2;\n\n    scrollBy({\n        behavior: 'smooth',\n        top: heightCard,\n    });\n}"],"names":["KEY","BASE_URL","getSearch","searchText","currentPage","perPage","axios","error","iziToast","createMarkup","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loader","loadMoreBtn","loadMoreBtnText","loadBtnSpinner","saveQuery","refreshPage","totalHits","onSearch","evt","hideLoadMoreBtn","resp","SimpleLightbox","checkBtnStatus","loadBtnSearch","showBtnSpinner","hideBtnSpinner","scrollNextPage","showLoadMoreBtn","maxPage","scrollingTopPage","upButton","heightCard"],"mappings":"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"}